#!/usr/bin/env bash

en=en0

usage() {
cat <<END

USAGE

  wifi on
  wifi off
  wifi scan
  wifi join <ssid> <password>
  wifi list
  wifi forget <ssid>
  wifi info

END
}

wifi() {
  case $1 in
    on)
      networksetup -setairportpower $en on
      ;;

    off)
      networksetup -setairportpower $en off
      ;;

    re*)
      wifi off
      wifi on
      ;;

    scan)
      /System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport scan
      ;;

    join)
      networksetup -setairportnetwork $en "$2" "$3"
      ;;

    list)
      networksetup -listpreferredwirelessnetworks $en
      ;;

    forget)
      networksetup -removepreferredwirelessnetwork $en "$2"
      ;;

    info | *)
      networksetup -getinfo 'Wi-Fi'
      usage
      ;;
  esac
}

wifi "$@"
